<section>
  <div class="margin-b-20">
    <ol class="breadcrumb font-16">
      <li class="breadcrumb-item"><a>接口管理</a></li>
      <li class="breadcrumb-item active"><a href="javascript: void(0)">接口概览</a></li>
    </ol>
  </div>

  <mat-card>
    <mat-card-header>
      <mat-card-title class="full-height flex-v-center" style="display: flex; margin-bottom: 0;">
        <span class="font-16 margin-r-20">分类</span>
      </mat-card-title>
      <div class="flex flex-v-center mr-auto">
        <ul class="nav nav-pills" id="pills-tab" role="tablist">
          <li class="nav-item" *ngFor="let cat of cats; let i = index;">
            <a class="nav-link font-12" [ngClass]="{'active': queryParam.cat === cat}" routerLink="./" [queryParams]="{cat: cat, page: 1}" queryParamsHandling="merge" id="pills-home-tab-${i}" data-toggle="pill" role="tab" aria-controls="pills-home" aria-selected="true">{{cat}}</a>
          </li>
        </ul>
      </div>
      <div class="flex-inline font-12">
        <mat-form-field>
          <mat-select placeholder="发布状态" [(value)]="queryParam.publish" (selectionChange)="onChangePublishStatus($event)">
            <mat-option *ngFor="let status of publishStatus" [value]="status.id">
              {{ status.label }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <input type="text" matInput [(ngModel)]="queryParam.key" (keyup.enter)="onSearch()" placeholder="请输入接口名称">
        </mat-form-field>
        <a mat-mini-fab color="primary" (click)="onSearch()">
          <i class="fa fa-search" aria-hidden="true"></i>
        </a>
      </div>
    </mat-card-header>

    <mat-card-header>
      <div class="mr-auto"></div>
      <div class="flex-inline">
        <a mat-raised-button color="accent" routerLink="./edit">
           新增
        </a>
        <a mat-raised-button [color]="canEdit ? 'warn' : ''" (click)="onChangeEdit()">
          编辑
        </a>
      </div>
    </mat-card-header>

    <mat-card-content class="margin-t-20">
      <div class="row">
        <div class="col-lg-3 col-md-4 col-sm-12 mb-5" *ngFor="let api of apis">
          <div class="card">
            <img class="card-img-top" src="../../../../../asset/image/default/company_default.png" alt="API Logo">
            <div class="card-body">
              <h4 class="card-title"><a [routerLink]="['./detail', api.apiId, api.apiName]">{{api.apiName}}</a></h4>
              <h5>分类： <span class="text-gray">{{api.apiCategory}}</span></h5>
              <h5>价格(分/次)： <strong class="text-red">1</strong> </h5>
              <h5>更新时间：<span>{{api.updateTime | date: 'y-MM-dd hh:mm:ss'}}</span></h5>
              <a *ngIf="canEdit" mat-raised-button color="warn" (click)="onDelete(api.apiId)">删除</a>
            </div>
          </div>
        </div>
      </div>
    </mat-card-content>

    <mat-card-footer>
      <ark-paginator rows="10" currentPage="{{currentPage}}" totalRecords="{{totalRecords}}" (onPageChange)="paginate($event)"></ark-paginator>
    </mat-card-footer>
  </mat-card>
</section>
