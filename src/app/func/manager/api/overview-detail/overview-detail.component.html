<section>
  <div class="margin-b-20">
    <ol class="breadcrumb font-16">
      <li class="breadcrumb-item"><a>接口管理</a></li>
      <li class="breadcrumb-item active"><a routerLink="/manager/api/overview">接口概览</a></li>
      <li class="breadcrumb-item active"><a href="javascript: void(0)">接口详情</a></li>
    </ol>
  </div>

  <mat-card>
    <mat-card-content>
      <div class="alert alert-primary flex" role="alert">
        <span>{{apiName}}</span>
        <span class="flex-1"></span>
        <!-- <div>
          调用 <strong class="text-red">5</strong> 次
        </div> -->
      </div>

      <form>
        <div class="form-group">
          <label for="">调用地址：</label>
          <div class="row">
            <div class="col-12">
              <input type="text" name="accessUrl" [readonly]="!isAdmin" class="form-control form-control-lg" [(ngModel)]="detail.accessUrl">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="">请求类型：</label>
          <div class="row">
            <div class="col-12">
              <input type="text" name="queryType" [readonly]="!isAdmin" class="form-control form-control-lg" [(ngModel)]="detail.queryType">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="">返回类型：</label>
          <div class="row">
            <div class="col-12">
              <input type="text" name="returnType" [readonly]="!isAdmin" class="form-control form-control-lg" [(ngModel)]="detail.returnType">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="">请求参数（header）：</label>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>名称</th>
                <th>类型</th>
                <th>是否必须</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="headerqueryColumnName" class="form-control form-control-lg" [(ngModel)]="detail.header.queryColumnName">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="headerqueryColumnType" class="form-control form-control-lg" [(ngModel)]="detail.header.queryColumnType">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="headerqueryOption" class="form-control form-control-lg" [(ngModel)]="detail.header.queryOption">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="headerqueryColumnDesc" class="form-control form-control-lg" [(ngModel)]="detail.header.queryColumnDesc">
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="form-group">
          <label for="">请求参数（query）：</label>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>名称</th>
                <th>类型</th>
                <th>是否必须</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="queryqueryColumnName" class="form-control form-control-lg" [(ngModel)]="detail.query.queryColumnName">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="queryqueryColumnType" class="form-control form-control-lg" [(ngModel)]="detail.query.queryColumnType">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="queryqueryOption" class="form-control form-control-lg" [(ngModel)]="detail.query.queryOption">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="queryqueryColumnDesc" class="form-control form-control-lg" [(ngModel)]="detail.query.queryColumnDesc">
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="form-group">
          <label for="">请求参数（body）：</label>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>名称</th>
                <th>类型</th>
                <th>是否必须</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="bodyqueryColumnName" class="form-control form-control-lg" [(ngModel)]="detail.body.queryColumnName">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="bodyqueryColumnType" class="form-control form-control-lg" [(ngModel)]="detail.body.queryColumnType">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="bodyqueryOption" class="form-control form-control-lg" [(ngModel)]="detail.body.queryOption">
                </td>
                <td>
                  <input type="text" [readonly]="!isAdmin" name="bodyqueryColumnDesc" class="form-control form-control-lg" [(ngModel)]="detail.body.queryColumnDesc">
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="form-group">
          <label for="">调用示例：</label>
          <!-- <code>
            {{detail.accessSample}}
          </code> -->
          <textarea name="sccesssample" class="form-control" rows="10" [readonly]="!isAdmin" [(ngModel)]="detail.accessSample"></textarea>
        </div>
        <div class="form-group">
          <label for="">返回示例：</label>
          <!-- <code class="json">
            {{detail.returnSample}}
          </code> -->
          <textarea name="returnSample" class="form-control" rows="10" [readonly]="!isAdmin" [(ngModel)]="detail.returnSample"></textarea>
        </div>
        <div class="form-group">
          <label for="">错误Code：</label> <button *ngIf="isAdmin" type="button" matTooltip="新增" matTooltipPosition="above" mat-mini-fab color="primary" (click)="addNewCode()"><i class="fa fa-plus" aria-hidden="true"></i></button>
          <div>
            <table class="table">
              <thead>
                <tr>
                  <th>Code</th>
                  <th>说明</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of detail.errorCodeList; let i = index;">
                  <td>
                    <input type="text" [readonly]="!isAdmin" [ngModelOptions]="{standalone: true}" class="form-control form-control-lg" [(ngModel)]="item.errorCode">
                  </td>
                  <td>
                    <input type="text" [readonly]="!isAdmin" [ngModelOptions]="{standalone: true}" class="form-control form-control-lg" [(ngModel)]="item.errorDesc">
                  </td>
                </tr>

                <tr *ngIf="!detail.errorCodeList || detail.errorCodeList.length < 1">
                  <td colspan="2">暂无数据</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="form-group">
          <label for="">发布状态: </label>
          <mat-radio-group name="publish" [(ngModel)]="detail.publish" [disabled]="!isAdmin">
            <mat-radio-button value="0">仅保存</mat-radio-button>
            <mat-radio-button value="1">保存并发布</mat-radio-button>
          </mat-radio-group>
        </div>

        <div class="form-group text-center">
          <a mat-raised-button color="primary" (click)="onSubmit()">保存</a>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</section>
